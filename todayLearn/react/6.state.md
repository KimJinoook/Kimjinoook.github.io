# state
- props
  - 컴포넌트가 사용되는 과정에서 부모 컴포넌트가 설정하는 값
  - 컴포넌트 자신은 해당 props를 읽기전용으로만 사용 가능
  - props의 값을 바꾸려면 부모컴포넌트에서 바꾸어야 한다
- state
  - 컴포넌트 내부에서 바뀔 수 있는 값
  - 동적 데이터를 다룰 때 사용
  - 종류
    - 클래스형 컴포넌트의 state
    - 함수형 컴포넌트에서 useState 함수를 통해 사용하는 state   

***

## 클래스형 컴포넌트의 state   
```javascript
import React, { Component } from 'react';

class Counter extends Component {
  constructor(props) {
    super(props);
    this.state = { number: 0 };
  }

  render() {
    const { number } = this.state;
    return (
      <div>
        <h1>{number}</h1>
        <button
        onClick={() => {
          this.setState({ number: number + 1 });
        }}
        >+1</button>
      </div>
    );
  }
}
export default Counter;

```

- 컴포넌트에 state를 설정할때, constructor 메서드를 이용
- 컴포넌트의 state는 객체형식이어야 한다
- render함수에서 현재 state를 조회할 때는 this.state을 조회   

#### setState에 함수인자 전달   

```javascript
<button
  onClick={() => {
    this.setState({ number: number + 1 });
    this.setState({ number: this.state.number + 1 });
  }}
>
```
- this.setState는 값을 업데이트할 때 상태가 비동기적으로 업데이트
  - setState를 두번 호출했지만 숫자는 1만 늘어난다.
  - 값이 비동기적으로 변하기때문에, 바로 바뀌지 않기 때문   

```javascript
<button
  onClick={() => {
    this.setState((prevState) => {
      return {
        number: prevState.number + 1,
      };
    });
    this.setState((prevState) => ({
      number: prevState.number + 1 //함수에서 바로 객체를 반환한다는 의미
    }));
  }}
>
```
- setState에 객체 대신 함수인자를 전달
- 함수에서 객체를 바로 반환하기 때문에, 숫자 2씩 증가   

#### setState 후 특정 작업 수행   

```javascript
<button
  onClick={() => {
    this.setState(
      {
        number: number + 1,
      },
      () => {
        console.log('setState 호출됨');
        console.log(this.state);
      }
    );
  }}
>
```
- setState의 두번째 파라미터로 콜백함수 등록
  - setState의 작업이 끝난 후, 해당 콜백함수 수행   

***

## 함수형 컴포넌트의 state
- 리액트 16.8 이전까지는 함수형 컴포넌트에서 state 사용 불가
- 이 후 부터는 useState 함수를 이용해 state 사용
  - 이 과정에서 Hooks 사용

```javascript
import React, { useState } from 'react';
const Say = () => {
  const [message, setMessage] = useState('');
  const onClickEnter = () => setMessage('안녕하세요');
  const onClickLeave = () => setMessage('안녕히 가세요');
  return (
    <div>
      <button onClick={onClickEnter}>입장</button>
      <button onClick={onClickLeave}>퇴장</button>
      <h1>{message}</h1>
    </div>
  );
};
export default Say;

```
- useState 함수의 인자에는 상태의 초기값을 넣어준다
  - 클래스형 컴포넌트에서의 state 초기값 : 객체
  - 함수형 컴포넌트에서는 객체가 아니어도 상관없다
- 함수를 호출하면 배열 반환
  - 첫번째 원소 : 현재 상태
  - 두번째 원소 : 상태를 바꾸어주는 함수 (setter 함수)
  - 배열 비구조화 할당을 통해 이름을 자유롭게 정할 수 있다
    - const\[message,setMessage] = useState('')
